<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>pkglet - Hybrid Package Manager Documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>pkglet</h1>


<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/builder.html">builder</a></li>
  <li><a href="../modules/cli.html">cli</a></li>
  <li><a href="../modules/config.html">config</a></li>
  <li><a href="../modules/conflict.html">conflict</a></li>
  <li><a href="../modules/fetcher.html">fetcher</a></li>
  <li><strong>installer</strong></li>
  <li><a href="../modules/loader.html">loader</a></li>
  <li><a href="../modules/resolver.html">resolver</a></li>
  <li><a href="../modules/search.html">search</a></li>
  <li><a href="../modules/sync.html">sync</a></li>
  <li><a href="../modules/version.html">version</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>installer</code></h1>
<p>Package installation module</p>
<p>

</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#copy_from_temp">copy_from_temp (manifest)</a></td>
	<td class="summary">Remove all files installed by a package during uninstallation process
 This function handles the actual file removal for package uninstallation, ensuring
 that all files, directories, and artifacts created during installation are properly
 cleaned up.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#determine_build_type">determine_build_type (manifest, preference)</a></td>
	<td class="summary">Determine optimal build type based on user preference and package availability
 This function implements intelligent build type selection that balances user preferences
 with package capabilities.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#downgrade">downgrade (package_name, target_version, args)</a></td>
	<td class="summary">Downgrade a package to a specific version (any string allowed)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#get_all_installed">get_all_installed ()</a></td>
	<td class="summary">Get all installed packages</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#get_installed_version">get_installed_version (package_name)</a></td>
	<td class="summary">Get installed version of a package</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#install">install (manifest, args)</a></td>
	<td class="summary">Install a package from manifest with comprehensive dependency resolution and build orchestration
 This function is the core installation routine that handles the complete package lifecycle
 from source acquisition to final installation.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#merge_options">merge_options (manifest, cli_options)</a></td>
	<td class="summary">Merge and prioritize configuration options from multiple sources
 This function implements a sophisticated option merging system that combines default
 values from package manifests, global configuration settings, and command-line overrides.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#remove_installation_record">remove_installation_record (manifest)</a></td>
	<td class="summary">Remove package installation record from the package database during uninstallation
 This function cleans up the package database by removing the installation record
 for the specified package.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#resolve_optional_dependencies">resolve_optional_dependencies (manifest, visited)</a></td>
	<td class="summary">Resolve optional dependencies (installable but not required)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#uninstall">uninstall (manifest)</a></td>
	<td class="summary">Uninstall a package with custom hook support and thorough cleanup
 This function handles complete package removal with support for custom uninstall hooks
 that packages can define for specialized cleanup procedures.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#upgrade">upgrade (package_name, args)</a></td>
	<td class="summary">Upgrade a package to the latest available version</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#upgrade_all">upgrade_all (args)</a></td>
	<td class="summary">Upgrade all installed packages to their latest versions</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "copy_from_temp"></a>
    <strong>copy_from_temp (manifest)</strong>
    </dt>
    <dd>
    Remove all files installed by a package during uninstallation process
 This function handles the actual file removal for package uninstallation, ensuring
 that all files, directories, and artifacts created during installation are properly
 cleaned up.  This is a critical component of the uninstallation process that must
 be thorough to prevent leftover files from accumulating and potentially causing
 conflicts or system issues. The function is designed to work with package manifests
 that track installed files and can be extended to support more sophisticated
 file tracking and removal strategies for complex packages.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">manifest</span>
         table Package manifest containing information about installed files and directories to remove
        </li>
    </ul>





</dd>
    <dt>
    <a name = "determine_build_type"></a>
    <strong>determine_build_type (manifest, preference)</strong>
    </dt>
    <dd>
    Determine optimal build type based on user preference and package availability
 This function implements intelligent build type selection that balances user preferences
 with package capabilities.  When set to "auto", it prioritizes binary packages for faster
 installation but falls back to source compilation when binaries aren't available. This
 approach provides the best user experience by minimizing build times while ensuring
 all packages remain installable regardless of pre-compiled binary availability.
 The function is critical for supporting both development and production deployment
 scenarios with different performance requirements.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">manifest</span>
         table Package manifest containing available source and binary specifications
        </li>
        <li><span class="parameter">preference</span>
         string User's preferred build type: "source" for compilation, "binary" for pre-compiled packages, or "auto" for automatic selection
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        string The final determined build type that will be used for installation
    </ol>




</dd>
    <dt>
    <a name = "downgrade"></a>
    <strong>downgrade (package_name, target_version, args)</strong>
    </dt>
    <dd>
    Downgrade a package to a specific version (any string allowed)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">package_name</span>
         string Name of the package to downgrade
        </li>
        <li><span class="parameter">target_version</span>
         string Target version to downgrade to (can be any string: tag, commit, etc.)
        </li>
        <li><span class="parameter">args</span>
         table Installation arguments
        </li>
    </ul>





</dd>
    <dt>
    <a name = "get_all_installed"></a>
    <strong>get_all_installed ()</strong>
    </dt>
    <dd>
    Get all installed packages



    <h3>Returns:</h3>
    <ol>

        table List of all installed package names
    </ol>




</dd>
    <dt>
    <a name = "get_installed_version"></a>
    <strong>get_installed_version (package_name)</strong>
    </dt>
    <dd>
    Get installed version of a package


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">package_name</span>
         string Name of the package
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        string|nil Installed version, or nil if not installed
    </ol>




</dd>
    <dt>
    <a name = "install"></a>
    <strong>install (manifest, args)</strong>
    </dt>
    <dd>
    Install a package from manifest with comprehensive dependency resolution and build orchestration
 This function is the core installation routine that handles the complete package lifecycle
 from source acquisition to final installation.  It supports bootstrap mode for system-level
 installations, performs conflict detection, resolves dependencies recursively, determines
 optimal build strategies, merges configuration options, and records installation metadata.
 The function orchestrates multiple subsystems including fetching, building, and database
 management to ensure reliable and reproducible package installations across different
 environments and configurations.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">manifest</span>
         table Complete package manifest containing metadata, dependencies, sources, and build instructions
        </li>
        <li><span class="parameter">args</span>
         table Installation arguments including bootstrap options, build preferences, and custom configuration overrides
        </li>
    </ul>





</dd>
    <dt>
    <a name = "merge_options"></a>
    <strong>merge_options (manifest, cli_options)</strong>
    </dt>
    <dd>
    Merge and prioritize configuration options from multiple sources
 This function implements a sophisticated option merging system that combines default
 values from package manifests, global configuration settings, and command-line overrides.
 It follows a clear precedence hierarchy where CLI options override global settings,
 which in turn override manifest defaults. The function handles boolean conversion
 from string values and ensures that all option types are properly normalized for
 consistent behavior across different configuration sources. This system enables
 flexible package customization while maintaining predictable configuration behavior.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">manifest</span>
         table Package manifest containing default option definitions and values
        </li>
        <li><span class="parameter">cli_options</span>
         table Command-line options that take highest precedence in the merge hierarchy
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        table Final merged options with all sources combined and properly typed
    </ol>




</dd>
    <dt>
    <a name = "remove_installation_record"></a>
    <strong>remove_installation_record (manifest)</strong>
    </dt>
    <dd>
    Remove package installation record from the package database during uninstallation
 This function cleans up the package database by removing the installation record
 for the specified package.  This is essential for maintaining database integrity
 and ensuring that the system correctly reflects the current installation state.
 The removal is typically performed during uninstallation operations and prevents
 stale records from interfering with future installation attempts or dependency
 resolution. The function uses a simple file deletion approach matching the
 record creation mechanism for consistency.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">manifest</span>
         table Package manifest whose installation record should be removed
        </li>
    </ul>





</dd>
    <dt>
    <a name = "resolve_optional_dependencies"></a>
    <strong>resolve_optional_dependencies (manifest, visited)</strong>
    </dt>
    <dd>
    Resolve optional dependencies (installable but not required)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">manifest</span>
         table Package manifest
        </li>
        <li><span class="parameter">visited</span>
         table Tracking set to prevent cycles (internal use)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        table Optional dependencies that could be installed
    </ol>




</dd>
    <dt>
    <a name = "uninstall"></a>
    <strong>uninstall (manifest)</strong>
    </dt>
    <dd>
    Uninstall a package with custom hook support and thorough cleanup
 This function handles complete package removal with support for custom uninstall hooks
 that packages can define for specialized cleanup procedures.  It checks installation
 status, executes pre-uninstall hooks for preparation, removes installed files,
 runs post-uninstall hooks for final cleanup, and removes installation records.
 The hook system allows packages to perform complex uninstallation operations
 such as stopping services, cleaning up configuration files, or reverting system
 changes while ensuring no remnants remain after removal.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">manifest</span>
         table Package manifest containing uninstall hooks and metadata for proper cleanup
        </li>
    </ul>





</dd>
    <dt>
    <a name = "upgrade"></a>
    <strong>upgrade (package_name, args)</strong>
    </dt>
    <dd>
    Upgrade a package to the latest available version


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">package_name</span>
         string Name of the package to upgrade
        </li>
        <li><span class="parameter">args</span>
         table Installation arguments
        </li>
    </ul>





</dd>
    <dt>
    <a name = "upgrade_all"></a>
    <strong>upgrade_all (args)</strong>
    </dt>
    <dd>
    Upgrade all installed packages to their latest versions


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">args</span>
         table Installation arguments
        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/LDoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 2026-02-20 20:06:02 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
